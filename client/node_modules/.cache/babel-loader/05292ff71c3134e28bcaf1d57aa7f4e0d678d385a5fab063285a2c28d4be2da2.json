{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{useNavigate,Link}from\"react-router-dom\";import{ToastContainer,toast}from\"react-toastify\";import\"./Register.css\";import\"react-toastify/dist/ReactToastify.css\";import{registerRoute}from\"../utils/APIRoutes\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Register=()=>{const navigate=useNavigate();useEffect(()=>{const adminKey=localStorage.getItem(\"secret-key-admin\");const userKey=localStorage.getItem(\"secret-key\");if(adminKey){navigate(\"/admin\");}else if(userKey){navigate(\"/instructor\");}},[navigate]);const[formValues,setFormValues]=useState({username:\"\",email:\"\",password:\"\",isAdmin:false});const toastOptions={position:\"bottom-right\",autoClose:8000,pauseOnHover:true,draggable:true,theme:\"light\"};const validateForm=()=>{const{username,email,password}=formValues;if(username.length<3){toast.error(\"Username must be at least 3 characters long.\",toastOptions);return false;}if(password.length<8){toast.error(\"Password must be at least 8 characters long.\",toastOptions);return false;}if(email===\"\"){toast.error(\"Email is required.\",toastOptions);return false;}return true;};const handleSubmit=async e=>{e.preventDefault();if(validateForm()){const{username,email,password,isAdmin}=formValues;try{const response=await axios.post(registerRoute,{username,email,password,isAdmin});const{data}=response;if(data.status===false){toast.error(data.msg,toastOptions);}else if(data.status===true){if(data.user.isAdmin){localStorage.setItem(\"secret-key-admin\",JSON.stringify(data.user));navigate(\"/admin\");}else{localStorage.setItem(\"secret-key\",JSON.stringify(data.user));navigate(\"/instructor\");}}}catch(error){toast.error(\"An error occurred during registration.\",toastOptions);}}};const handleChange=e=>{const{name,value,type,checked}=e.target;setFormValues(prevValues=>({...prevValues,[name]:type===\"checkbox\"?checked:value}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-container-register\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://toxicologycongress.wordpress.com/wp-content/uploads/2018/10/registernowgif.gif\",alt:\"Register Now\",className:\"registration-gif\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-content-register\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"form-register\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Username\",name:\"username\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",name:\"email\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",name:\"password\",onChange:handleChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-container-register\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"isAdmin\",name:\"isAdmin\",checked:formValues.isAdmin,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"isAdmin\",children:\"Admin\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button-register\",type:\"submit\",children:\"Create User\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login.\"})]})]})})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});};export default Register;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","Link","ToastContainer","toast","registerRoute","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Register","navigate","adminKey","localStorage","getItem","userKey","formValues","setFormValues","username","email","password","isAdmin","toastOptions","position","autoClose","pauseOnHover","draggable","theme","validateForm","length","error","handleSubmit","e","preventDefault","response","post","data","status","msg","user","setItem","JSON","stringify","handleChange","name","value","type","checked","target","prevValues","children","className","src","alt","onSubmit","placeholder","onChange","id","htmlFor","to"],"sources":["C:/Users/Aditya/Desktop/Lecture-Scheduling-Application/client/src/pages/Register.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"./Register.css\"\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { registerRoute } from \"../utils/APIRoutes\";\n\nconst Register = () => {\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const adminKey = localStorage.getItem(\"secret-key-admin\");\n    const userKey = localStorage.getItem(\"secret-key\");\n\n    if (adminKey) {\n      navigate(\"/admin\");\n    } else if (userKey) {\n      navigate(\"/instructor\");\n    }\n  }, [navigate]);\n\n  const [formValues, setFormValues] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    isAdmin: false,\n  });\n\n  const toastOptions = {\n    position: \"bottom-right\",\n    autoClose: 8000,\n    pauseOnHover: true,\n    draggable: true,\n    theme: \"light\",\n  };\n\n  const validateForm = () => {\n    const { username, email, password } = formValues;\n\n    if (username.length < 3) {\n      toast.error(\"Username must be at least 3 characters long.\", toastOptions);\n      return false;\n    }\n\n    if (password.length < 8) {\n      toast.error(\"Password must be at least 8 characters long.\", toastOptions);\n      return false;\n    }\n\n    if (email === \"\") {\n      toast.error(\"Email is required.\", toastOptions);\n      return false;\n    }\n\n    return true;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (validateForm()) {\n      const { username, email, password, isAdmin } = formValues;\n      try {\n        const response = await axios.post(registerRoute, {\n          username,\n          email,\n          password,\n          isAdmin,\n        });\n\n        const { data } = response;\n\n        if (data.status === false) {\n          toast.error(data.msg, toastOptions);\n        } else if (data.status === true) {\n          if (data.user.isAdmin) {\n            localStorage.setItem(\"secret-key-admin\", JSON.stringify(data.user));\n            navigate(\"/admin\");\n          } else {\n            localStorage.setItem(\"secret-key\", JSON.stringify(data.user));\n            navigate(\"/instructor\");\n          }\n        }\n      } catch (error) {\n        toast.error(\"An error occurred during registration.\", toastOptions);\n      }\n    }\n  };\n\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setFormValues((prevValues) => ({\n      ...prevValues,\n      [name]: type === \"checkbox\" ? checked : value,\n    }));\n  };\n\n  return (\n    <>\n      <div className=\"form-container-register\">\n        <img\n          src=\"https://toxicologycongress.wordpress.com/wp-content/uploads/2018/10/registernowgif.gif\"\n          alt=\"Register Now\"\n          className=\"registration-gif\"\n        />\n        <div className=\"form-content-register\">\n    \n          <form className=\"form-register\" onSubmit={handleSubmit}>\n            <input\n              type=\"text\"\n              placeholder=\"Username\"\n              name=\"username\"\n              onChange={handleChange}\n            />\n            <input\n              type=\"email\"\n              placeholder=\"Email\"\n              name=\"email\"\n              onChange={handleChange}\n            />\n            <input\n              type=\"password\"\n              placeholder=\"Password\"\n              name=\"password\"\n              onChange={handleChange}\n            />\n            \n            <div className=\"checkbox-container-register\">\n              <input\n                type=\"checkbox\"\n                id=\"isAdmin\"\n                name=\"isAdmin\"\n                checked={formValues.isAdmin}\n                onChange={handleChange}\n              />\n              <label htmlFor=\"isAdmin\">Admin</label>\n            </div>\n            <button className=\"button-register\" type=\"submit\">Create User</button>\n            <span>\n              Already have an account? <Link to=\"/login\">Login.</Link>\n            </span>\n          </form>\n        </div>\n      </div>\n      <ToastContainer />\n    </>\n  );\n};\n\nexport default Register;\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}